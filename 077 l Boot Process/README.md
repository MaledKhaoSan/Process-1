<a id="text"></a>
# :round_pushpin: Boot Process
Overview 
<br><br>
กระบวนการบูตของLinuxเป็นส่วนสำคัญของการทำงาน เนื่องจากเป็นขั้นตอนเริ่มต้นในการเริ่มระบบปฏิบัติการ ทุกครั้งที่คุณกดปุ่มเปิดเครื่อง ระบบของคุณจะใช้เวลาสักครู่ในการเตรียมความพร้อมและแสดงหน้าเข้าสู่ระบบ คุณอาจสงสัยว่าเบื้องหลังมีการดำเนินการอะไรบ้าง บทความนี้จะอธิบายว่าLinuxจัดการกระบวนการบูตระบบอย่างไร 
<br><br>
Introduction 
<br><br>
 Booting คือกระบวนการที่นำระบบจากสถานะปิดไปสู่ระบบปฏิบัติการที่กำลังทำงาน โดยขั้นตอนทั้งหมดแบ่งออกเป็น 4 ขั้นตอนหลัก มีดังนี้:
<img src="https://static.thegeekstuff.com/wp-content/uploads/2011/02/linux-boot-process.png"  width="100" height="100">

<br><br>
- Firmware stage
- Bootloader stage
- Kernel stage
- Init stage
<br><br>
<a id="text"></a>
# :round_pushpin: Firmware stage
1. Firmware stage:
Firmware stage คือ ซอฟต์แวร์ที่ฝังอยู่บนชิปฮาร์ดแวร์ ทำหน้าที่ควบคุมการทำงานพื้นฐานของอุปกรณ์ เฟิร์มแวร์จะทำงานก่อนระบบปฏิบัติการ Linux โหลดขึ้นมา ทำหน้าที่เตรียมอุปกรณ์ให้พร้อมใช้งาน เช่น การตรวจสอบฮาร์ดแวร์ การตั้งค่าคอนฟิกเบื้องต้น และการโหลดบูตโลเดอร์
<br><br>
แบ่งออกเป็น 2 ประเภทหลักๆ ดังนี้:

1. เฟิร์มแวร์ BIOS/UEFI: เป็นเฟิร์มแวร์ที่ควบคุมการทำงานพื้นฐานของเมนบอร์ด เช่น การตรวจสอบฮาร์ดแวร์ การตั้งค่าวันที่และเวลา การบูตระบบปฏิบัติการ

2. เฟิร์มแวร์อุปกรณ์: เป็นเฟิร์มแวร์ที่ควบคุมการทำงานของอุปกรณ์เฉพาะ เช่น การ์ดจอ การ์ดเสียง ไดรฟ์ Wi-Fi
<br><br>



ลำดับการทำงานของ Firmware stage มีดังนี้:

1. POST (Power-On Self Test): เฟิร์มแวร์จะตรวจสอบฮาร์ดแวร์ว่าทำงานปกติหรือไม่

2. Initialization: เฟิร์มแวร์จะตั้งค่าคอนฟิกเบื้องต้นของอุปกรณ์ เช่น วันที่ เวลา

3. Bootloader: เฟิร์มแวร์จะโหลดบูตโลเดอร์ ซึ่งเป็นโปรแกรมที่ทำหน้าที่โหลดระบบปฏิบัติการ

4. Operating System: บูตโลเดอร์จะโหลดระบบปฏิบัติการ Linux เข้าสู่หน่วยความจำ

รายละเอียดของแต่ละขั้นตอน:

1. POST (Power-On Self Test):

เฟิร์มแวร์จะตรวจสอบว่า CPU ทำงานปกติหรือไม่
เฟิร์มแวร์จะตรวจสอบว่า RAM ทำงานปกติหรือไม่
เฟิร์มแวร์จะตรวจสอบว่าอุปกรณ์ต่อพ่วง เช่น ฮาร์ดดิสก์ การ์ดจอ ทำงานปกติหรือไม่
2. Initialization:

เฟิร์มแวร์จะตั้งค่าวันที่และเวลา
เฟิร์มแวร์จะตั้งค่าคอนฟิกอุปกรณ์ต่อพ่วง
เฟิร์มแวร์จะตั้งค่าคอนฟิก BIOS/UEFI
3. Bootloader:

เฟิร์มแวร์จะค้นหาบูตโลเดอร์จากอุปกรณ์ต่อพ่วง เช่น ฮาร์ดดิสก์ หรือ USB drive
เฟิร์มแวร์จะโหลดบูตโลเดอร์เข้าสู่หน่วยความจำ
บูตโลเดอร์จะทำหน้าที่โหลดระบบปฏิบัติการ Linux
4. Operating System:

บูตโลเดอร์จะโหลดระบบปฏิบัติการ Linux เข้าสู่หน่วยความจำ
ระบบปฏิบัติการ Linux จะเริ่มทำงาน

<a id="text"></a>
# :round_pushpin: Bootloader stage
<br><br>

2. Bootloader stage:
Bootloader stage คือ เป็นขั้นตอนสำคัญที่เตรียมฮาร์ดแวร์ ค้นหา และโหลดระบบปฏิบัติการ Bootloader ยอดนิยม ได้แก่ GRUB, LILO  ทำหน้าที่หลัก ดังนี้

1. เตรียมการฮาร์ดแวร์:

ตรวจสอบและตั้งค่าหน่วยความจำ (RAM)
เริ่มต้นระบบ I/O เช่น คีย์บอร์ด จอภาพ
โหลดอุปกรณ์ต่อพ่วงที่จำเป็น
2. ค้นหาและโหลดระบบปฏิบัติการ:

ค้นหาพาร์ทิชันระบบปฏิบัติการ
โหลด kernel ของ Linux เข้าสู่หน่วยความจำ
ส่งต่อการควบคุมให้กับ kernel
3. แสดงเมนูตัวเลือก:

เสนอตัวเลือกการบูทระบบปฏิบัติการ
อนุญาตให้ผู้ใช้เลือก kernel เวอร์ชัน
ตั้งค่าพารามิเตอร์การบูท

Bootloader ที่นิยมใช้ใน Linux:

GRUB (Grand Unified Bootloader): ตัวเลือกมาตรฐาน รองรับระบบ UEFI และ BIOS
LILO (Linux Loader): ตัวเลือกดั้งเดิม รองรับเฉพาะ BIOS
SYSLINUX: ตัวเลือกที่มีขนาดเล็ก รองรับระบบ UEFI และ BIOS
ประเภทของ Bootloader:

MBR (Master Boot Record): พบในระบบ BIOS เก็บข้อมูลเกี่ยวกับพาร์ทิชันและ bootloader
GPT (GUID Partition Table): พบในระบบ UEFI เก็บข้อมูลเกี่ยวกับพาร์ทิชันและ bootloader

ตัวอย่าง Bootloader ที่นิยมใช้:

GRUB (Grand Unified Bootloader): ตัวเลือกมาตรฐาน รองรับระบบ UEFI และ BIOS
LILO (Linux Loader): ตัวเลือกดั้งเดิม รองรับเฉพาะ BIOS
SYSLINUX: ตัวเลือกที่มีขนาดเล็ก รองรับระบบ UEFI และ BIOS

หลักการทำงาน:

POST (Power-On Self Test): เมื่อเปิดเครื่อง คอมพิวเตอร์จะทำการ POST เพื่อตรวจสอบฮาร์ดแวร์
BIOS/UEFI: BIOS หรือ UEFI จะค้นหาอุปกรณ์บูทที่มี bootloader
Bootloader: Bootloader จะโหลดตัวเองเข้าสู่หน่วยความจำ
ค้นหาพาร์ทิชัน: Bootloader จะค้นหาพาร์ทิชันระบบปฏิบัติการ
โหลด kernel: Bootloader จะโหลด kernel ของ Linux เข้าสู่หน่วยความจำ
ส่งต่อการควบคุม: Bootloader จะส่งต่อการควบคุมให้กับ kernel
Kernel: Kernel จะเริ่มต้นระบบปฏิบัติการ
<br><br>

ผู้ใช้สามารถ

กดปุ่มพิเศษ (เช่น F2, F10, Esc) ระหว่าง POST เพื่อเข้าสู่ BIOS/UEFI setup
เลือกลำดับการบูท (boot order) ใน BIOS/UEFI setup
กำหนดค่า bootloader ใน bootloader configuration file
ผลลัพธ์ที่ได้:

ระบบปฏิบัติการจะเริ่มต้น: หาก bootloader ค้นหาพาร์ทิชันระบบปฏิบัติการและโหลด kernel สำเร็จ ระบบปฏิบัติการจะเริ่มต้น
แสดงเมนูตัวเลือก: ผู้ใช้สามารถเลือกตัวเลือกการบูท เช่น เลือก kernel เวอร์ชัน เลือกพาร์ทิชัน
แสดงข้อความแสดงข้อผิดพลาด: หาก bootloader พบปัญหา อาจแสดงข้อความแสดงข้อผิดพลาด
ตัวอย่าง:

GRUB: ผู้ใช้สามารถกดปุ่ม C ระหว่างการบูทเพื่อเข้าสู่ GRUB command line interface
LILO: ผู้ใช้สามารถแก้ไขไฟล์ /etc/lilo.conf เพื่อกำหนดค่า bootloader


4. Kernel stage:
โหลดเคอร์เนลของระบบปฏิบัติการ
เคอร์เนลเริ่มต้นระบบปฏิบัติการ
จัดการทรัพยากรระบบ เช่น หน่วยความจำ กระบวนการ อุปกรณ์
<br><br>

5. Init stage:
เริ่มต้น init system (เช่น systemd)
Init system เรียกใช้สคริปต์เพื่อเริ่มต้นบริการระบบพื้นฐาน
เตรียมพร้อมสำหรับผู้ใช้
<br><br>


